<?php

declare(strict_types=1);

/*
|--------------------------------------------------------------------------
| Test Bootstrap
|--------------------------------------------------------------------------
|
| Этот файл принудительно устанавливает тестовые переменные окружения
| ДО загрузки Laravel, чтобы переопределить переменные окружения Docker.
|
*/

// Принудительно устанавливаем тестовую базу данных
// Это необходимо, потому что Docker устанавливает DB_DATABASE на основную БД,
// и .env.testing / phpunit.xml не могут переопределить системные переменные окружения
putenv('DB_DATABASE=app_test');
$_ENV['DB_DATABASE'] = 'app_test';
$_SERVER['DB_DATABASE'] = 'app_test';

// Загружаем стандартный autoloader
require __DIR__ . '/../vendor/autoload.php';
